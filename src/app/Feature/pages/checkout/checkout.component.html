@if(cartData().products){

<div
  class="grid grid-cols-5 gap-5 md:px-[2rem] relative lg:px-[5rem] xl:px-[15rem]"
>
  <div class="col-span-3 max-md:col-span-5 my-8 max-md:px-5">
    <form
      class="space-y-5 border p-4 rounded-lg"
      [formGroup]="checkoutForm"
      (ngSubmit)="checkOute()"
    >
      <h2 class="font-bold text-3xl text-black capitalize">checkOut</h2>

      <div class="relative">
        <input
          formControlName="details"
          type="text"
          id="email"
          class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 border-green-500 appearance-none dark:border-gray-600 focus:outline-none focus:ring-0 focus:border-green-600 peer"
          placeholder=" "
        />
        <label
          for="email"
          class="absolute text-sm text-gray-700 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-green-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1"
          >Enter your Details</label
        >
      </div>
      <div class="relative">
        <input
          formControlName="city"
          type="text"
          id="city"
          class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 border-green-500 appearance-none dark:border-gray-600 focus:outline-none focus:ring-0 focus:border-green-600 peer"
          placeholder=" "
        />
        <label
          for="city"
          class="absolute text-sm text-gray-700 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-green-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1"
          >Enter your City</label
        >
      </div>
      <div class="relative">
        <input
          type="text"
          formControlName="phone"
          id="phone"
          class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 border-green-500 appearance-none dark:border-gray-600 focus:outline-none focus:ring-0 focus:border-green-600 peer"
          placeholder=" "
        />
        <label
          for="phone"
          class="absolute text-sm text-gray-700 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-green-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1"
          >Enter your Number</label
        >
      </div>

      <button
        [disabled]="checkoutForm.invalid"
        type="submit"
        class="capitalize py-2 px-10 cursor-pointer disabled:from-gray-500 disabled:to-black rounded-md ms-auto block text-gray-100 font-bold from-purple-500 bg-linear-to-l to-green-500 border border-gray-100"
      >
        pay now
      </button>
    </form>
  </div>

  <aside
    [class.max-md:translate-x-[94%]]="tranlate()"
    class="max-md:fixed min-w-[250px] max-md:ps-10 transition-all duration-400 overflow-y-auto right-0 bottom-0 top-0 z-[4500] col-span-2 max-md:col-span-2 order-1 md:order-2 lg:my-2"
  >
    <button
      (click)="tanslat()"
      [class.-rotate-180]="tranlate()"
      class="size-10 top-[30%] md:hidden left-0 rounded-full absolute bg-black text-white"
    >
      <i class="text-xl fa fa-angle-right" aria-hidden="true"></i>
    </button>
    <div
      [class.max-md:opacity-0]="tranlate()"
      class="rounded-lg bg-white p-4 opacity-100 transition-all duration-700 capitalize"
    >
      <h3 class="text-2xl my-2 max:md:ps-6 font-bold">Total product</h3>
      <div
        class="space-y-3 max-h-[20rem] overflow-y-auto p-4 my-3 rounded-lg shadow-md"
      >
        @for (item of cartData().products; track $index) {
        <div class="flex items-center gap-3">
          <div class="relative">
            <img
              [src]="item.product.imageCover"
              width="50"
              height="50"
              class="w-[50px] h-[3.125rem] p-1 object-contain shadow-md shadow-gray-900 rounded-md"
              alt=""
            />
            <span
              class="block top-[-5px] right-[-5px] absolute size-5 text-xs text-center bg-red-600 rounded-full flex justify-center items-center text-white"
              >{{ item.count }}</span
            >
          </div>
          <p>{{ item.product.title.split(" ", 4).join(" ") }}</p>
          <p class="ms-auto">${{ item.price }}</p>
        </div>
        }
      </div>

      <ul
        class="text-lg text-center flex flex-col gap-2 font-medium p-3 border-[1px] rounded-t-lg border-gray-200"
      >
        <li class="flex justify-between items-center">
          <span>items total price</span>
          <span>
            {{
              cartData().totalCartPrice + cartData().totalCartPrice * 0.15
                | currency : "GBP"
            }}</span
          >
        </li>
        <li class="flex justify-between items-center">
          <span
            >discount
            <span class="text-lg font-bold text-red-700">: 15%</span></span
          >
          <span>
            {{ cartData().totalCartPrice * 0.15 | currency : "GBP" }}</span
          >
        </li>
      </ul>
      <p
        class="text-lg p-4 flex justify-between items-center font-semibold rounded-b py-2 border-t-0 border-[1px] border-gray-200"
      >
        <span class="inline-block text-gray-900 font-semibold text-xl me-auto"
          >Total Card Price :</span
        >

        <span>
          <span class="text-xs text-gray-700">USD</span> ${{
            cartData().totalCartPrice
          }}</span
        >
      </p>

      <p class="p-4 text-gray-700 text-xs">
        by placing your order you agree to the baskets
        <span class="text-[#35AFA0] cursor-pointer"> terms of services</span>
        and
        <span class="text-[#35AFA0] cursor-pointer"> privacy policy.</span>
      </p>

      <p class="px-4 text-gray-600 font-medium text-xs">
        terms &conditions apply
      </p>
    </div>
  </aside>
</div>
}@else {
<div
  class="grid grid-cols-1 gap-5 md:px-[2rem] relative lg:px-[5rem] xl:px-[15rem]"
>
  <div role="status" class="max-w-sm animate-pulse">
    <div
      class="h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-48 mb-4"
    ></div>
    <div
      class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 max-w-[360px] mb-2.5"
    ></div>
    <div class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 mb-2.5"></div>
    <div
      class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 max-w-[330px] mb-2.5"
    ></div>
    <div
      class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 max-w-[300px] mb-2.5"
    ></div>
    <div
      class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 max-w-[360px]"
    ></div>
    <span class="sr-only">Loading...</span>
  </div>

  <div
    role="status"
    class="space-y-8 animate-pulse md:space-y-0 md:space-x-8 rtl:space-x-reverse md:flex md:items-center"
  >
    <div
      class="flex items-center justify-center w-full h-48 bg-gray-300 rounded-sm sm:w-96 dark:bg-gray-700"
    >
      <svg
        class="w-10 h-10 text-gray-200 dark:text-gray-600"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="currentColor"
        viewBox="0 0 20 18"
      >
        <path
          d="M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"
        />
      </svg>
    </div>
    <div class="w-full">
      <div
        class="h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-48 mb-4"
      ></div>
      <div
        class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 max-w-[480px] mb-2.5"
      ></div>
      <div class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 mb-2.5"></div>
      <div
        class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 max-w-[440px] mb-2.5"
      ></div>
      <div
        class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 max-w-[460px] mb-2.5"
      ></div>
      <div
        class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 max-w-[360px]"
      ></div>
    </div>
    <span class="sr-only">Loading...</span>
  </div>
</div>
}
